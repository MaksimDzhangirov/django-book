# Пособие по развертыванию приложения на Django. Мотивация

Здесь описаны причины из-за которых возникла необходимость написания этого пособия.

---

Django - это мощный фреймворк, позволяющий реализовать почти все что угодно, хотя некоторым, чтобы понять это требуется очень много времени. Именно реализация всего чего угодно и делает его таким мощным \(а также возможность, как только Вы его изучили, создавать надежные работающие прототипы \(**MVP** - Minimum Viable Product\) за один день\). Мы любим Django, потому что когда мы пишем приложение в Flask или Pyramid \(другие фреймворки на языке Python - прим. переводчика\), в конце концов мы просто пытаемся воссоздать функции, которые уже существуют в Django \(Вы можете даже не знать об их существовании\).

К сожалению, мне кажется, что практически не существует современной \(2017 года\) документации о том как развернуть полноценное веб-приложение с использованием Django. С этим утверждением многие могли бы поспорить, тем не менее я не видел полноценного руководства , поясняющего от начала до конца каждую мелочь в Django, а также "подводные камни" при развертывании приложения. Вы и я видели немного статей, в которых объясняется как интегрировать Django c новейшими технологиями. Например, как использовать Django с основанным на компонентах Vue.js или "Какой должна быть стандартная конфигурация для NGINX в Docker Compose в связке с Django?" Многие из статей, которые удается найти в поисковике при развертывании приложений на Django рассматривают какой-то один конкретный случай, забывая об основных отраслевых стандартах и технологиях, используют Python 2.7 \(в 2016-2017 году!\) или не достаточно полно раскрывают рассматриваемую тему.

Таким образом, новым пользователям Django придется потратить несколько недель, "постигая" фреймворк \(на своих локальных машинах\), веря, что все будет также хорошо работать, когда они развернут приложение на реальном сервере. Стандартный "путь молодого бойца" для новичков в Django включает:

1. Чтение [стандартной документации по Django](https://docs.djangoproject.com/en/dev/intro/), [Two Scopes of Django](https://www.twoscoopspress.com/) или [Django Girls](https://tutorial.djangogirls.org/en/).
2. Повторное чтение документации
3. Ошибки при миграциях
4. Настройка аутентификации
5. Изучение представлений, основанных на классах

6. Использование представлений, основанных на классах, во всех случаях

7. Желание добавить дополнительные возможности, например, подтверждение электронной почты, но без использования сторонних приложений, например, AllAuth, поэтому они пытаются написать их сами

8. Ошибки при миграциях, в этот раз из-за конфликта при объединении кода другого члена команды при запушивании 0001\_initial.py.

9. Понимание , что сторонние приложения можно использовать: установка AllAuth, когда начальник попросил добавить регистрацию через Facebook и Twitter. Замена регистрации через email.

Через несколько недель и последующего рефакторинга моделей:

1. Прекращение использования представлений, основанных на классах, во всех случаях

---

Когда разработчик-новичок на Django наконец -то предполагает, что он создал работающее приложение и решает поменять DEBUG=False, вместо света в конце туннеля, он видит открывающиеся врата в 9 кругов ада развертывания.

Именно в этот момент, если они делали все примерно как я сказал, возникает множество вопросов без четких ответов:

1. Лучшие практики при развертывании? Allowed Hosts? SITE\_ID = 1?
2. Как работать с секретными ключами без переменных среды?
3. Какого провайдера платформы для облачных вычислений лучше всего использовать для Django?
4. Как настроить PostgreSQL Server?
5. Управление запросами? Обратный прокси? Статические файлы?
6. Медиа файлы? [Pillow](https://github.com/python-pillow/Pillow)? Amazon S3?
7. Что такое Docker? Docker-Compose? Docker-Swarm?
8. Почему страницы грузятся так медленно? Возможен ли рендеринг на стороне клиента?
9. Как использовать JavaScript фронтэнд фреймворки и REST API?
10. и т.д.

Причем ответ на каждый из заданных вопросов рождает новое множество проблем, о существовании которых до этого разработчик не знал.

Многим опытным разработчикам на Django перечисленные выше вопросы могут показаться смешными , но в своё время они тоже задавали подобные вопросы. На самом деле начинающий Full Stack разработчик или опытный Backend разработчик, которому поручено работать с DevOps, учится постепенно. Сейчас важно определить лучшие современные практики развертывания веб-приложений на Django. Сделав это, мы также узнаем какие практики являются лучшие для развертывания любого веб приложения в целом \(Ruby on Rails, Node / Express, Spring\).

В настоящий момент, структура современного пособия по развертыванию приложений на Django мне представляется следующим образом:

* Создание вручную приложения на Django
* Настройка моделей и методы работы со сложными моделями
* Обсуждение множества файлов настроек и конфигураций для локальной и продакшен среды разработки
* Создание REST API, используя [Djago REST API](http://www.django-rest-framework.org/)
* Использоние фронтэнд JavaScript библиотеки \(React или Vue.js\), а не создание страниц на стороне сервера с помощью Django \(не просто добавляем Webpack сборку из .js и .css файлов в Django index.html\).
* Тестирование Django моделей, представлений, API и JavaScript фронтэнд
* Обработка запросов и обратный прокси , используя NGINX.
* Размещение Django, Node. Postgres, NGINX, \(возможно Redis\) в файле Docker-Compose
* Реализация методов непрерывной интеграции/развертывания

Я поговорю с коллегами, чтобы определить полный список проблем/решений, но я также рад услышать предложения от читателей о том, что нужно включить в пособие.

Спасибо, что прочитали,

Дилан.



